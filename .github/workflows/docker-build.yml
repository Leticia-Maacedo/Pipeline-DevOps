test:
  runs-on: ubuntu-latest
  needs: build

  steps:
    - name: Checkout do c√≥digo
      uses: actions/checkout@v4

    - name: Build da imagem Docker para testes
      run: |
        docker build -t devops-api-test:${{ github.sha }} .

    - name: Rodar testes dentro do container Docker
      run: |
        docker run --rm \
          -e PYTHONPATH=/app \
          devops-api-test:${{ github.sha }} \
          python -m pytest -v